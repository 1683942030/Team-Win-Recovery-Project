<?xml version="1.0"?>

<recovery>
    <resources>
        <resource name="header" type="font" filename="bluehighway-40" />
        <resource name="UItext" type="font" filename="bluehighway-40" />
        <resource name="logo" type="animation" filename="cm7_" />
        <resource name="progress" type="animation" filename="indeterminate" />
        <resource name="progress_empty" type="image" filename="progress_empty" />
        <resource name="progress_full" type="image" filename="progress_fill" />
    </resources>

    <pages>
        <page name="main">
            <background color="black" />

            <object type="animation">
                <placement x="142" y="220" />
                <resource name="logo" />
                <speed fps="15" render="1" />
                <loop frame="1" />
            </object>

            <object type="text">
                <placement x="270" y="570" placement="4" />
                <font resource="header" color="white" />
                <text>CyanogenMod 7 for the HTC EVO 3D</text>
            </object>

            <object type="text">
                <placement x="270" y="620" placement="4" />
                <font resource="UItext" color="white" />
                <text>%stage%</text>
            </object>

            <object type="progressbar">
                <placement x="144" y="650" />
                <resource  empty="progress_empty" full="progress_full" />
                <data name="ui_progress" />
            </object>

            <object type="animation">
                <placement x="144" y="650" />
                <resource name="progress" />
                <speed fps="15" render="2" />
                <loop frame="1" />
            </object>

            <object type="action">
                <action function="set">stage=Formatting system...</action>
            </object>

            <object type="action">
                <condition var1="ui_progress" op=">" var2="10" />
                <action function="set">stage=Installing system...</action>
            </object>

            <object type="action">
                <condition var1="ui_progress" op=">" var2="50" />
                <action function="set">stage=Setting permissions...</action>
            </object>

            <object type="action">
                <condition var1="ui_progress" op=">" var2="70" />
                <action function="set">stage=Finishing up...</action>
            </object>

            <object type="action">
                <condition var1="tw_operation_state" var2="1" />
                <action function="page">done</action>
            </object>
        </page>

        <page name="done">
            <background color="black" />

            <object type="animation">
                <placement x="142" y="220" />
                <resource name="logo" />
                <speed fps="15" render="1" />
                <loop frame="1" />
            </object>

            <object type="text">
                <placement x="270" y="570" placement="4" />
                <font resource="header" color="white" />
                <text>CyanogenMod 7 for the HTC EVO 3D</text>
            </object>

            <object type="text">
                <placement x="270" y="620" placement="4" />
                <font resource="UItext" color="white" />
                <text>Installation Complete</text>
            </object>

            <object type="image">
                <image resource="progress_full" />
                <placement x="144" y="650" />
            </object>

            <object type="action">
                <touch x="0" y="0" w="540" h="960" />
                <action function="home">main</action>
            </object>
        </page>
    </pages>
</recovery>

